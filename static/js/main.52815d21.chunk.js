(this.webpackJsonpteamwork_frontend=this.webpackJsonpteamwork_frontend||[]).push([[0],{12:function(e,t){e.exports={APIendpoint:"https://teamwork-leo.herokuapp.com/api/v1"}},36:function(e,t,n){e.exports=n(52)},41:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(19),r=n.n(o),c=(n(41),n(11)),i=n(5),s=n(6),m=n(8),u=n(7),d=n(9),p=n(21),f=n(2),h=function(e){var t="/articles/"+e.post.articleId;return l.a.createElement(f.i,{md:"8"},l.a.createElement(f.d,{style:{margin:"10px"}},l.a.createElement(f.e,null,l.a.createElement(f.h,null,e.post.title),l.a.createElement(f.g,null,e.post.post),l.a.createElement(f.c,{href:t},"View"))))},g=function(e){var t="/gifs/"+e.post.gifId;return l.a.createElement(f.i,{md:"8"},l.a.createElement(f.d,{style:{margin:"10px"}},l.a.createElement(f.e,null,l.a.createElement(f.h,null,e.post.title),l.a.createElement(f.f,{className:"img-fluid",src:e.post.imageUrl,waves:!0}),l.a.createElement(f.c,{href:t},"View"))))},E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={isOpen:!1,token:localStorage.getItem("token")},n.toggleCollapse=function(){n.setState({isOpen:!n.state.isOpen})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.token?l.a.createElement(c.a,null,l.a.createElement(f.t,{color:"aqua-gradient",dark:!0,expand:"md"},l.a.createElement(f.u,null,l.a.createElement("strong",{className:"white-text"},"TEAMWORK")),l.a.createElement(f.w,{onClick:this.toggleCollapse}),l.a.createElement(f.j,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},l.a.createElement(f.v,{left:!0},l.a.createElement(f.s,null,l.a.createElement(f.m,{href:"/"},"Feed")),l.a.createElement(f.s,null,l.a.createElement(f.m,{href:"/post-article"},"Post Article")),l.a.createElement(f.s,null,l.a.createElement(f.m,{href:"/post-gif"},"Post Gif"))),l.a.createElement(f.v,{right:!0},l.a.createElement(f.s,null,l.a.createElement(f.l,null,l.a.createElement(f.o,{nav:!0,caret:!0},l.a.createElement(f.p,{icon:"user"})),l.a.createElement(f.n,{className:"dropdown-default"},l.a.createElement(f.m,{href:"/signout"},"logout")))))))):l.a.createElement(p.a,{to:"/signin"})}}]),t}(a.Component),I=n(12),v=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getFeed=function(){return new Promise((function(e,t){fetch(I.APIendpoint+"/feed",{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(t){t.json().then((function(t){var n=t.data.map((function(e){return e.articleId?l.a.createElement(h,{key:e.articleId,post:e}):l.a.createElement(g,{key:e.gifId,post:e})}));console.log("FEED",n),e(n)}))})).catch((function(e){console.log(e),t(e)}))}))},e.state={feed:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return localStorage.getItem("token")?(0===this.state.feed.length&&this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)})),l.a.createElement(l.a.Fragment,null,l.a.createElement(E,null),l.a.createElement(f.k,null,l.a.createElement(f.z,null,this.state.feed)))):l.a.createElement(p.a,{to:"/signin"})}}]),t}(a.Component),b=n(20),O=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.sendForm=function(){fetch(I.APIendpoint+"/auth/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})}).then((function(t){console.log("RAW RES",t),t.json().then((function(t){console.log("RAW DATA:",t),console.log("DATA:","".concat(t.data.token," ").concat(t.data.userId)),localStorage.removeItem("token"),localStorage.removeItem("userId"),t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("userId",t.data.userId)),console.log("LOCAL TOKEN",localStorage.getItem("token")),e.setState({loggedIn:!0})})).catch((function(e){console.log(e),alert("Invalid username or password")}))})).catch((function(e){console.log(e),alert("Invalid username or password")}))},e.state={email:"",password:"",loggedIn:!1},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.loggedIn?l.a.createElement(p.a,{to:"/"}):l.a.createElement(f.k,null,l.a.createElement(f.z,null,l.a.createElement(f.i,{md:"12"},l.a.createElement(f.d,{style:{margin:"10%"}},l.a.createElement(f.e,null,l.a.createElement("form",{onSubmit:this.sendForm},l.a.createElement("p",{className:"h5 text-center mb-4"},"Sign in"),l.a.createElement("div",{className:"grey-text"},l.a.createElement(f.r,{label:"Type your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",name:"email",value:this.state.email,onInput:this.handleInput}),l.a.createElement(f.r,{label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0,name:"password",value:this.state.password,onInput:this.handleInput})),l.a.createElement("div",{className:"text-center"},l.a.createElement(f.c,{onClick:this.sendForm},"Login"))))))))}}]),t}(a.Component),j=function(){return localStorage.removeItem("token"),l.a.createElement("div",null,"You have been logged out.",l.a.createElement(p.a,{to:"/signin"}))},y=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.sendForm=function(){e.state.title&&e.state.post?fetch(I.APIendpoint+"/articles",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:e.state.title,post:e.state.post,isGif:!1,authorId:4,flaged:!1,createdOn:new Date})}).then((function(t){t.json().then((function(t){console.log("DATA:",JSON.stringify(t.data)),e.setState({articleId:t.data.articleId})}))})).catch((function(e){console.log(e),alert("Invalid username or password")})):alert("Enter valid Title or Post ")},e.state={title:"",post:"",articleId:0},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(this.state.articleId>0){var e="/articles/"+this.state.articleId;return l.a.createElement(p.a,{to:e})}return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,null),l.a.createElement(f.k,null,l.a.createElement(f.z,null,l.a.createElement(f.i,{md:"12"},l.a.createElement(f.d,{style:{margin:"10%"}},l.a.createElement(f.e,null,l.a.createElement("form",{onSubmit:this.sendForm},l.a.createElement("p",{className:"h5 text-center mb-4"},"Post Article"),l.a.createElement("div",{className:"grey-text"},l.a.createElement(f.r,{label:"Article Title",group:!0,type:"text",validate:!0,error:"wrong",success:"right",name:"title",value:this.state.title,onInput:this.handleInput}),l.a.createElement(f.r,{label:"Article Post",group:!0,type:"textarea",validate:!0,error:"wrong",success:"right",name:"post",value:this.state.post,onInput:this.handleInput})),l.a.createElement("div",{className:"text-center"},l.a.createElement(f.c,{onClick:this.sendForm},"Post Article")))))))))}}]),t}(a.Component),k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.sendForm=function(){if(console.log(e.fileInputHandler," <<:>> ",e.fileInputHandler.current),e.state.title&&e.fileInputHandler.current.files[0]){var t=new FormData;t.append("file",e.fileInputHandler.current.files[0]),t.append("title",e.state.title),t.append("authorId","4"),t.append("isGif","true"),t.append("flaged","false"),t.append("createdOn",new Date),fetch(I.APIendpoint+"/gifs",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," 4")},body:t}).then((function(t){t.json().then((function(t){console.log("DATA:",t.data.gifId,JSON.stringify(t.data)),e.setState({gifId:t.data.gifId})}))})).catch((function(e){console.log(e),alert("Invalid username or password")}))}else alert("Enter valid Title or File ")},e.state={title:"",file:null,gifId:0},e.fileInputHandler=l.a.createRef(),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(this.state.gifId>0){var e="/gifs/"+this.state.gifId;return l.a.createElement(p.a,{to:e})}return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,null),l.a.createElement(f.k,null,l.a.createElement(f.z,null,l.a.createElement(f.i,{md:"12"},l.a.createElement(f.d,{style:{margin:"10%"}},l.a.createElement(f.e,null,l.a.createElement("form",{onSubmit:this.sendForm},l.a.createElement("p",{className:"h5 text-center mb-4"},"Post Gif"),l.a.createElement("div",{className:"grey-text"},l.a.createElement(f.r,{label:"Gif Title",group:!0,type:"text",validate:!0,error:"wrong",success:"right",name:"title",value:this.state.title,onInput:this.handleInput}),l.a.createElement("div",{className:"custom-file"},l.a.createElement("input",{type:"file",ref:this.fileInputHandler}))),l.a.createElement("div",{className:"text-center"},l.a.createElement(f.c,{onClick:this.sendForm},"Post Article")))))))))}}]),t}(a.Component),S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getFeed=function(){return new Promise((function(t,n){var a=e.props.match.params.articleId;console.log("ARTICLE_ID:",a),fetch(I.APIendpoint+"/articles/"+a,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){var n,a=e.data;console.log("DATA-ARTICLE",JSON.stringify(a)),n=a.articleId?l.a.createElement(h,{key:a.articleId,post:a}):l.a.createElement("h2",null,"Article post not found"),console.log("Article",n),t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={feed:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return localStorage.getItem("token")?(0===this.state.feed.length&&this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)})),l.a.createElement(l.a.Fragment,null,l.a.createElement(E,null),l.a.createElement(f.k,null,l.a.createElement(f.z,null,this.state.feed)))):l.a.createElement(p.a,{to:"/signin"})}}]),t}(a.Component),A=function(e){return console.log("COMMENTS POST:>>",JSON.stringify(e.comment)),l.a.createElement(f.g,{style:{margin:"10px",width:"100%"}},e.comment.comment,l.a.createElement("hr",null))},w=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.sendForm=function(){if(e.state.comment){var t=e.props.id,n=I.APIendpoint+"/articles/"+t+"/comments";fetch(n,{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," ").concat(localStorage.getItem("userId")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({comment:e.state.comment,postId:t,authorId:localStorage.getItem("userId"),flaged:!1,createdOn:new Date})}).then((function(t){t.json().then((function(t){console.log("DATA:",t),e.setState({comment:""}),e.props.reLoadComments()})).catch((function(e){return console.log("ERROR!!!!",e)}))})).catch((function(e){console.log(e),alert("Invalid comment")}))}else alert("Enter valid comment ")},e.state={comment:""},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(f.k,null,l.a.createElement(f.z,null,l.a.createElement(f.i,{md:"12"},l.a.createElement("br",null),l.a.createElement("form",{onSubmit:this.sendForm},l.a.createElement("p",{className:"h5 text-center mb-8"},"Post Comment"),l.a.createElement("div",{className:"grey-text"},l.a.createElement(f.r,{type:"textarea",rows:"4",name:"comment",label:"Enter Your Comment",icon:"pencil-alt",value:this.state.comment,onInput:this.handleInput})),l.a.createElement("div",{className:"text-center"},l.a.createElement(f.c,{onClick:this.sendForm},"Post Comment")))))))}}]),t}(a.Component),C=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getComments=function(){return new Promise((function(t,n){var a=e.props.articleId||e.props.gifId;e.setState({postId:a});var o=I.APIendpoint+"/articles/"+a+"/comments";fetch(o,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){if(!e.data)return l.a.createElement(l.a.Fragment,null);var n=e.data.map((function(e){return console.log(JSON.stringify(e)),l.a.createElement(A,{key:e.commentId,comment:e})}));console.log("FEED",n),t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={comments:[],postId:null},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"reLoadComments",value:function(){this.setState({comments:[]})}},{key:"render",value:function(){var e=this;return localStorage.getItem("token")?(0===this.state.comments.length&&this.getComments().then((function(t){e.setState({comments:t})})).catch((function(e){return console.log(e)})),l.a.createElement(l.a.Fragment,null,l.a.createElement(f.k,null,l.a.createElement(f.z,null,l.a.createElement(w,{reLoadComments:function(){return e.reLoadComments()},id:this.state.postId})),l.a.createElement(f.z,null,this.state.comments)))):l.a.createElement(p.a,{to:"/signin"})}}]),t}(a.Component),T=function(e){e.post.gifId;return l.a.createElement(f.i,{md:"8"},l.a.createElement(f.d,{style:{margin:"10px"}},l.a.createElement(f.e,null,l.a.createElement(f.h,null,e.post.title),l.a.createElement(f.f,{className:"img-fluid",src:e.post.imageUrl,waves:!0}),l.a.createElement(C,{gifId:e.post.gifId}))))},F=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getFeed=function(){return new Promise((function(t,n){var a=e.props.match.params.gifId;console.log("GIF_ID:",a),fetch(I.APIendpoint+"/gifs/"+a,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){var n,a=e.data;console.log("DATA-ARTICLE",JSON.stringify(a)),n=a.gifId?l.a.createElement(T,{key:a.gifId,post:a}):l.a.createElement("h2",null,"Gif post not found"),console.log("Gif",n),t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={feed:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return localStorage.getItem("token")?(0===this.state.feed.length&&this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)})),l.a.createElement(l.a.Fragment,null,l.a.createElement(E,null),l.a.createElement(f.k,null,l.a.createElement(f.z,null,this.state.feed)))):l.a.createElement(p.a,{to:"/signin"})}}]),t}(a.Component),N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={tag:""},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.d,null,l.a.createElement(p.b,{path:"/signin",component:O}),l.a.createElement(p.b,{path:"/signout",component:j}),l.a.createElement(p.b,{path:"/post-article",component:y}),l.a.createElement(p.b,{path:"/post-gif",component:k}),l.a.createElement(p.b,{path:"/articles/:articleId",component:S}),l.a.createElement(p.b,{path:"/gifs/:gifId",component:F}),l.a.createElement(p.b,{exact:!0,path:"/",component:v}),l.a.createElement(p.b,{render:function(){return l.a.createElement("h1",null,"404 Page Not Found")}})))}}]),t}(l.a.Component);var P=function(){return l.a.createElement(c.a,{basename:"/Teamwork_frontend"},l.a.createElement(N,null))};n(49),n(50),n(51);r.a.render(l.a.createElement(P,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.52815d21.chunk.js.map
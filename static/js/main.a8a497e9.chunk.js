(this.webpackJsonpteamwork_frontend=this.webpackJsonpteamwork_frontend||[]).push([[0],{10:function(e,t){e.exports={APIendpoint:"https://teamwork-leo.herokuapp.com/api/v1",linkAppend:"/Teamwork_frontend/"}},36:function(e,t,n){e.exports=n(52)},41:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(19),r=n.n(l),c=(n(41),n(12)),i=n(5),s=n(6),m=n(8),u=n(7),d=n(9),p=n(21),f=n(2),g=n(10),h=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).toggleCollapse=function(){e.setState({isOpen:!e.state.isOpen})},e.state={isOpen:!1,token:localStorage.getItem("token")},console.log("constructor",e.state),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("dm",this.state.token,localStorage.getItem("token")),this.setState({token:localStorage.getItem("token")})}},{key:"componentWillUnmount",value:function(){console.log("wum",localStorage.getItem("token"))}},{key:"render",value:function(){return this.state.token&&0==this.state.token.length||!this.state.token?o.a.createElement(o.a.Fragment,null):o.a.createElement(c.a,null,o.a.createElement(f.t,{color:"aqua-gradient",dark:!0,expand:"md"},o.a.createElement(f.u,null,o.a.createElement("strong",{className:"white-text"},"TEAMWORK")),o.a.createElement(f.w,{onClick:this.toggleCollapse}),o.a.createElement(f.j,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},o.a.createElement(f.v,{left:!0},o.a.createElement(f.s,null,o.a.createElement(f.m,{href:"{linkAppend}"},o.a.createElement(f.p,{icon:"rss"})," Feed")),o.a.createElement(f.s,null,o.a.createElement(f.m,{href:"{linkAppend}post-article"},o.a.createElement(f.p,{icon:"newspaper"})," Post Article")),o.a.createElement(f.s,null,o.a.createElement(f.m,{href:"{linkAppend}post-gif"},o.a.createElement(f.p,{icon:"image"})," Post Gif"))),o.a.createElement(f.v,{right:!0},o.a.createElement(f.s,null,o.a.createElement(f.l,null,o.a.createElement(f.o,{nav:!0,caret:!0},o.a.createElement(f.p,{icon:"user"})),o.a.createElement(f.n,{className:"dropdown-default"},o.a.createElement(f.m,{href:"{linkAppend}/signout"},"logout"))))))))}}]),t}(a.Component),E=function(e){console.log("FLAG STATUS: ",e.post.flag);return o.a.createElement(f.c,{disabled:1==(e.post.flag&&e.post.flag),onClick:function(){return function(e){var t=e.post.articleId||e.post.gifId;if(t){var n=g.APIendpoint+"/articles/"+t+"/flag";console.log("LINK DES..",n),fetch(n,{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," ").concat(localStorage.getItem("userId")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({postId:t,flag:!0})}).then((function(t){t.json().then((function(t){console.log("FLAGGED DATA:",t),e.reRender()})).catch((function(e){return console.log("ERROR!!!!",e)}))})).catch((function(e){console.log(e),alert("Invalid flag")}))}else console.log("Invalid ID")}(e)}},o.a.createElement(f.p,{icon:"flag"})," Flag")},I=function(e){var t="/articles/"+e.post.articleId;return o.a.createElement(f.i,{md:"8"},o.a.createElement(f.d,{style:{margin:"10px"}},o.a.createElement(f.e,null,o.a.createElement("div",{className:"content"},e.post.authorName),o.a.createElement(f.h,null,e.post.title),o.a.createElement(f.g,null,e.post.post),o.a.createElement(f.c,{href:t},"View"),o.a.createElement(E,{post:e.post,reRender:function(){return e.reRender()}}))))},v=function(e){var t="/gifs/"+e.post.gifId;return o.a.createElement(f.i,{md:"8"},o.a.createElement(f.d,{style:{margin:"10px"}},o.a.createElement(f.e,null,o.a.createElement("div",{className:"content"},e.post.authorName),o.a.createElement(f.h,null,e.post.title),o.a.createElement(f.f,{className:"img-fluid",src:e.post.imageUrl,waves:!0}),o.a.createElement(f.c,{href:t},"View"),o.a.createElement(E,{post:e.post,reRender:function(){return e.reRender()}}))))},b=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getFeed=function(){return new Promise((function(t,n){fetch(g.APIendpoint+"/feed",{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(n){n.json().then((function(n){var a=n.data.map((function(t){return t.articleId?o.a.createElement(I,{key:t.articleId,post:t,reRender:function(){return e.reRender()},isRender:e.state.isReRender}):o.a.createElement(v,{key:t.gifId,post:t})}));console.log("FEED",a),t(a)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={isReRender:!1,feed:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"reRender",value:function(){var e=this,t=!this.state.isReRender;console.log("I AM RENDER"),this.setState({isReRender:t}),this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;0===this.state.feed.length&&this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return localStorage.getItem("token")?o.a.createElement(o.a.Fragment,null,o.a.createElement(f.k,null,o.a.createElement(f.z,null,this.state.feed))):o.a.createElement(p.a,{to:"/signin"})}}]),t}(a.Component),k=n(20),O=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.sendForm=function(){fetch(g.APIendpoint+"/auth/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})}).then((function(t){console.log("RAW RES",t),t.json().then((function(t){console.log("RAW DATA:",t),console.log("DATA:","".concat(t.data.token," ").concat(t.data.userId)),localStorage.removeItem("token"),localStorage.removeItem("userId"),t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("userId",t.data.userId)),console.log("LOCAL TOKEN",localStorage.getItem("token")),e.setState({loggedIn:!0})})).catch((function(e){console.log(e),alert("Invalid username or password")}))})).catch((function(e){console.log(e),alert("Invalid username or password")}))},e.state={email:"",password:"",loggedIn:!1},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.loggedIn?o.a.createElement(p.a,{to:"/"}):o.a.createElement(f.k,null,o.a.createElement(f.z,null,o.a.createElement(f.i,{md:"12"},o.a.createElement(f.d,{style:{margin:"10%"}},o.a.createElement(f.e,null,o.a.createElement("form",{onSubmit:this.sendForm},o.a.createElement("p",{className:"h5 text-center mb-4"},"Sign in"),o.a.createElement("div",{className:"grey-text"},o.a.createElement(f.r,{label:"Type your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",name:"email",autoComplete:"email",value:this.state.email,onInput:this.handleInput}),o.a.createElement(f.r,{label:"Type your password",icon:"lock",group:!0,type:"password",autoComplete:"password",validate:!0,name:"password",value:this.state.password,onInput:this.handleInput})),o.a.createElement("div",{className:"text-center"},o.a.createElement(f.c,{onClick:this.sendForm},"Login"))))))))}}]),t}(a.Component),j=function(){return localStorage.removeItem("token"),localStorage.clear(),o.a.createElement("div",null,"You have been logged out.",o.a.createElement(p.a,{to:"/signin"}))},y=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.sendForm=function(){e.state.title&&e.state.post?fetch(g.APIendpoint+"/articles",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:e.state.title,post:e.state.post,isGif:!1,authorId:4,flaged:!1,createdOn:new Date})}).then((function(t){t.json().then((function(t){console.log("DATA:",JSON.stringify(t.data)),e.setState({articleId:t.data.articleId})}))})).catch((function(e){console.log(e),alert("Invalid username or password")})):alert("Enter valid Title or Post ")},e.state={title:"",post:"",articleId:0},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(this.state.articleId>0){var e="/articles/"+this.state.articleId;return o.a.createElement(p.a,{to:e})}return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.k,null,o.a.createElement(f.z,null,o.a.createElement(f.i,{md:"12"},o.a.createElement(f.d,{style:{margin:"10%"}},o.a.createElement(f.e,null,o.a.createElement("form",{onSubmit:this.sendForm},o.a.createElement("p",{className:"h5 text-center mb-4"},"Post Article"),o.a.createElement("div",{className:"grey-text"},o.a.createElement(f.r,{label:"Article Title",group:!0,type:"text",validate:!0,error:"wrong",success:"right",name:"title",autoComplete:"title",value:this.state.title,onInput:this.handleInput}),o.a.createElement(f.r,{label:"Article Post",group:!0,type:"textarea",validate:!0,error:"wrong",success:"right",name:"post",autoComplete:"post",value:this.state.post,onInput:this.handleInput})),o.a.createElement("div",{className:"text-center"},o.a.createElement(f.c,{onClick:this.sendForm},"Post Article")))))))))}}]),t}(a.Component),S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.sendForm=function(){if(console.log(e.fileInputHandler," <<:>> ",e.fileInputHandler.current),e.state.title&&e.fileInputHandler.current.files[0]){var t=new FormData;t.append("file",e.fileInputHandler.current.files[0]),t.append("title",e.state.title),t.append("authorId","4"),t.append("isGif","true"),t.append("flaged","false"),t.append("createdOn",new Date),fetch(g.APIendpoint+"/gifs",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," 4")},body:t}).then((function(t){t.json().then((function(t){console.log("DATA:",t.data.gifId,JSON.stringify(t.data)),e.setState({gifId:t.data.gifId})}))})).catch((function(e){console.log(e),alert("Invalid username or password")}))}else alert("Enter valid Title or File ")},e.state={title:"",file:null,gifId:0},e.fileInputHandler=o.a.createRef(),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(this.state.gifId>0){var e="/gifs/"+this.state.gifId;return o.a.createElement(p.a,{to:e})}return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.k,null,o.a.createElement(f.z,null,o.a.createElement(f.i,{md:"12"},o.a.createElement(f.d,{style:{margin:"10%"}},o.a.createElement(f.e,null,o.a.createElement("form",{onSubmit:this.sendForm},o.a.createElement("p",{className:"h5 text-center mb-4"},"Post Gif"),o.a.createElement("div",{className:"grey-text"},o.a.createElement(f.r,{label:"Gif Title",group:!0,type:"text",validate:!0,error:"wrong",success:"right",name:"title",autoComplete:"title",value:this.state.title,onInput:this.handleInput}),o.a.createElement("div",{className:"custom-file"},o.a.createElement("input",{type:"file",ref:this.fileInputHandler}))),o.a.createElement("div",{className:"text-center"},o.a.createElement(f.c,{onClick:this.sendForm},"Post Gif")))))))),o.a.createElement("hr",null))}}]),t}(a.Component),A=function(e){return console.log("COMMENTS POST:>>",JSON.stringify(e.comment)),o.a.createElement(f.g,{style:{margin:"10px",width:"100%"}},o.a.createElement("b",null,e.comment.authorName,":"),e.comment.comment,o.a.createElement("hr",null))},C=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.sendForm=function(){if(e.state.comment){var t=e.props.id,n=g.APIendpoint+"/articles/"+t+"/comments";fetch(n,{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," ").concat(localStorage.getItem("userId")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({comment:e.state.comment,postId:t,authorId:localStorage.getItem("userId"),flaged:!1,createdOn:new Date})}).then((function(t){t.json().then((function(t){console.log("DATA:",t),e.setState({comment:""}),e.props.reLoadComments()})).catch((function(e){return console.log("ERROR!!!!",e)}))})).catch((function(e){console.log(e),alert("Invalid comment")}))}else alert("Enter valid comment ")},e.state={comment:""},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.k,null,o.a.createElement(f.z,null,o.a.createElement(f.i,{md:"12"},o.a.createElement("br",null),o.a.createElement("form",{onSubmit:this.sendForm},o.a.createElement("p",{className:"h5 mb-8"},"Post Comment"),o.a.createElement("div",{className:"grey-text"},o.a.createElement(f.r,{type:"textarea",rows:"2",name:"comment",autoComplete:"comment",label:"Enter Your Comment",icon:"pencil-alt",value:this.state.comment,onInput:this.handleInput})),o.a.createElement("div",{className:"text-right"},o.a.createElement(f.c,{onClick:function(){return e.sendForm()}},"Post")))))),o.a.createElement("br",null))}}]),t}(a.Component),w=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getComments=function(){return new Promise((function(t,n){var a=e.props.articleId||e.props.gifId;e.setState({postId:a});var l=g.APIendpoint+"/articles/"+a+"/comments";fetch(l,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){if(!e.data||0==e.data.length)return o.a.createElement(o.a.Fragment,null);var n=e.data.map((function(e){return console.log(JSON.stringify(e)),o.a.createElement(A,{key:e.commentId,comment:e})}));console.log("FEED",n),t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={comments:[],checkedComments:!1,postId:null},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"reLoadComments",value:function(){this.setState({comments:[],checkedComments:!1})}},{key:"render",value:function(){var e=this;return localStorage.getItem("token")?(0===this.state.comments.length&&this.state.checkedComments&&this.getComments().then((function(t){e.setState({comments:t,checkedComments:!0})})).catch((function(e){return console.log(e)})),o.a.createElement(o.a.Fragment,null,o.a.createElement(f.k,null,o.a.createElement(f.z,null,o.a.createElement(C,{reLoadComments:function(){return e.reLoadComments()},id:this.state.postId})),o.a.createElement(f.z,null,this.state.comments)))):o.a.createElement(p.a,{to:"/signin"})}}]),t}(a.Component),T=function(e){e.post.articleId,e.post.articleId.collapseID;return o.a.createElement(f.i,{md:"8"},o.a.createElement(f.d,{style:{margin:"10px"}},o.a.createElement(f.e,null,o.a.createElement("div",{className:"content"},e.post.authorName),o.a.createElement(f.h,null,e.post.title),o.a.createElement(f.g,null,e.post.post),o.a.createElement("div",null,o.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample"},"Comments")),o.a.createElement("div",{class:"collapse",id:"collapseExample"},"Post comments",o.a.createElement(w,{articleId:e.post.articleId})))))},N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getFeed=function(){return new Promise((function(t,n){var a=e.props.match.params.articleId;console.log("ARTICLE_ID:",a),fetch(g.APIendpoint+"/articles/"+a,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){var n,a=e.data;console.log("DATA-ARTICLE",JSON.stringify(a)),n=a.articleId?o.a.createElement(T,{key:a.articleId,post:a}):o.a.createElement("h2",null,"Article post not found"),console.log("Article",n),t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={isReRender:!1,feed:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return 0===this.state.feed.length&&this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)})),o.a.createElement(o.a.Fragment,null,o.a.createElement(f.k,null,o.a.createElement(f.z,null,this.state.feed)))}}]),t}(a.Component),F=function(e){e.post.gifId;return o.a.createElement(f.i,{md:"8"},o.a.createElement(f.d,{style:{margin:"10px"}},o.a.createElement(f.e,null,o.a.createElement("div",{className:"content"},e.post.authorName),o.a.createElement(f.h,null,e.post.title),o.a.createElement(f.f,{className:"img-fluid",src:e.post.imageUrl,waves:!0}),o.a.createElement(w,{gifId:e.post.gifId}))))},R=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getGifFeed=function(){return new Promise((function(t,n){var a=e.props.match.params.gifId;console.log("GIF_ID:",a),fetch(g.APIendpoint+"/gifs/"+a,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){var n,a=e.data;console.log("DATA-ARTICLE",JSON.stringify(a)),n=a.gifId?o.a.createElement(F,{key:a.gifId,post:a}):o.a.createElement("h2",null,"Gif post not found"),console.log("Gif",n),t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={giffeed:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return 0===this.state.giffeed.length&&this.getGifFeed().then((function(t){e.setState({giffeed:t})})).catch((function(e){return console.log(e)})),o.a.createElement(o.a.Fragment,null,o.a.createElement(f.k,null,o.a.createElement(f.z,null,this.state.giffeed)))}}]),t}(a.Component),P=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={tag:"",token:localStorage.getItem("token")},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.token||"/signin"===window.location.pathname?o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null),o.a.createElement(p.d,null,o.a.createElement(p.b,{path:"/signin",component:O}),o.a.createElement(p.b,{path:"/signout",component:j}),o.a.createElement(p.b,{path:"/post-article",component:y}),o.a.createElement(p.b,{path:"/post-gif",component:S}),o.a.createElement(p.b,{path:"/articles/:articleId",component:N}),o.a.createElement(p.b,{path:"/gifs/:gifId",component:R}),o.a.createElement(p.b,{exact:!0,path:"/",component:b}),o.a.createElement(p.b,{render:function(){return o.a.createElement("h1",null,"404 Page Not Found")}}))):o.a.createElement(p.a,{to:"/signin"})}}]),t}(o.a.Component);var x=function(){return o.a.createElement(c.a,{basename:"/Teamwork_frontend"},o.a.createElement(P,null))};n(49),n(50),n(51);r.a.render(o.a.createElement(x,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.a8a497e9.chunk.js.map
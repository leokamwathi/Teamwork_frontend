(this.webpackJsonpteamwork_frontend=this.webpackJsonpteamwork_frontend||[]).push([[0],{35:function(e,t,a){e.exports=a(51)},40:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),o=a.n(l),c=(a(40),a(7)),s=a(14),i=a(15),m=a(17),u=a(16),p=a(18),d=a(19),h=a(2),E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.toggleCollapse=function(){a.setState({isOpen:!a.state.isOpen})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(c.a,null,r.a.createElement(h.u,{color:"indigo",dark:!0,expand:"md"},r.a.createElement(h.v,null,r.a.createElement("strong",{className:"white-text"},"TEAMWORK")),r.a.createElement(h.x,{onClick:this.toggleCollapse}),r.a.createElement(h.j,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},r.a.createElement(h.w,{left:!0},r.a.createElement(h.s,{active:!0},r.a.createElement(h.t,{to:"/"},"Feed")),r.a.createElement(h.s,null,r.a.createElement(h.t,{to:"/post-article"},"Post Article")),r.a.createElement(h.s,null,r.a.createElement(h.t,{to:"/post-gif"},"Post Gif"))),r.a.createElement(h.w,{right:!0},r.a.createElement(h.s,null,r.a.createElement(h.l,null,r.a.createElement(h.o,{nav:!0,caret:!0},r.a.createElement(h.p,{icon:"user"})),r.a.createElement(h.n,{className:"dropdown-default"},r.a.createElement(h.m,{href:"#!"},"change password"),r.a.createElement(h.m,{href:"/signout"},"logout"))))))))}}]),t}(n.Component),g=function(e){return localStorage.removeItem("token"),r.a.createElement(h.i,{md:"8"},r.a.createElement(h.d,{style:{margin:"10px"}},r.a.createElement(h.e,null,r.a.createElement(h.h,null,e.post.title),r.a.createElement(h.g,null,e.post.post),r.a.createElement(h.c,{href:"#"},"Comments"))))},f=function(e){return localStorage.removeItem("token"),r.a.createElement(h.i,{md:"8"},r.a.createElement(h.d,{style:{margin:"10px"}},r.a.createElement(h.e,null,r.a.createElement(h.h,null,e.post.title),r.a.createElement(h.f,{className:"img-fluid",src:e.post.imageUrl,waves:!0}),r.a.createElement(h.c,{href:"#"},"Comments"))))},v=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getFeed=function(){return new Promise((function(e,t){fetch("https://teamwork-leo.herokuapp.com/api/v1/feed",{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(t){t.json().then((function(t){var a=t.data.map((function(e){return e.articleId?r.a.createElement(g,{key:e.articleId,post:e}):r.a.createElement(f,{key:e.gifId,post:e})}));console.log("FEED",a),e(a)}))})).catch((function(e){console.log(e),t(e)}))}))},e.state={feed:[]},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return localStorage.getItem("token")?(0===this.state.feed.length&&this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)})),r.a.createElement(h.k,null,r.a.createElement(h.A,null,this.state.feed))):r.a.createElement(d.a,{to:"/signin"})}}]),t}(n.Component),b=a(34),k=function(e){function t(){var e;Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.sendForm=function(){fetch("https://teamwork-leo.herokuapp.com/api/v1/auth/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})}).then((function(t){t.json().then((function(t){console.log("DATA:","".concat(t.data.token," ").concat(t.data.userId));var a=t.data.token,n=t.data.userId;localStorage.setItem("token",a),localStorage.setItem("userId",n),e.setState({token:a}),e.setState({loggedIn:!0})}))})).catch((function(e){console.log(e),alert("Invalid username or password")}))};var a=localStorage.getItem("token");return e.state={email:"",password:"",token:a,userId:"",loggedIn:!1},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.state.loggedIn?r.a.createElement(d.a,{to:"/"}):r.a.createElement(h.k,null,r.a.createElement(h.A,null,r.a.createElement(h.i,{md:"6"},r.a.createElement("form",null,r.a.createElement("p",{className:"h5 text-center mb-4"},"Sign in"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(h.r,{label:"Type your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",name:"email",value:this.state.email,onInput:this.handleInput}),r.a.createElement(h.r,{label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0,name:"password",value:this.state.password,onInput:this.handleInput})),r.a.createElement("div",{className:"text-center"},r.a.createElement(h.c,{onClick:this.sendForm},"Login"))))))}}]),t}(n.Component),O=function(){return localStorage.removeItem("token"),r.a.createElement("div",null,"You have been logged out.",r.a.createElement(d.a,{to:"/signin"}))},j=function(e){function t(){var e;Object(s.a)(this,t),e=Object(m.a)(this,Object(u.a)(t).call(this));var a=localStorage.getItem("token");return e.state={token:a},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"getNavbar",value:function(){if(this.state.token)return r.a.createElement(E,null)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.getNavbar(),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:v}),r.a.createElement(d.b,{path:"/signin",component:k}),r.a.createElement(d.b,{path:"/signout",component:O}),r.a.createElement(d.b,{render:function(){return r.a.createElement("h1",null,"Not Found")}})))}}]),t}(r.a.Component);var I=function(){return r.a.createElement(c.a,null,r.a.createElement(j,null))};a(48),a(49),a(50);o.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e8c54a2b.chunk.js.map
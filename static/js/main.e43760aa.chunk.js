(this.webpackJsonpteamwork_frontend=this.webpackJsonpteamwork_frontend||[]).push([[0],{11:function(e,t){e.exports={APIendpoint:"https://teamwork-leo.herokuapp.com/api/v1",linkAppend:"/Teamwork_frontend/"}},36:function(e,t,n){e.exports=n(52)},41:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),l=n.n(o),c=(n(41),n(12)),i=n(3),s=n(4),m=n(6),u=n(5),p=n(7),d=n(21),h=n(2),f=function(e){function t(){var e;Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).toggleCollapse=function(){e.setState({isOpen:!e.state.isOpen})};var n=localStorage.getItem("token");return e.state={isOpen:!1,token:n},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;setTimeout((function(){e.setState({token:localStorage.getItem("token")})}),0);var t=this.props.reponame,n=t="Teamwork_frontend"===window.location.pathname.split("/")[1]?"/Teamwork_frontend/":"/",a=t+"post-article",o=t+"post-gif",l=t+"signout",i=r.a.createElement(r.a.Fragment,null);return i=this.state.token&&0===this.state.token.length||!this.state.token?r.a.createElement(r.a.Fragment,null):r.a.createElement(h.j,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},r.a.createElement(h.v,{left:!0},r.a.createElement(h.s,null,r.a.createElement(h.m,{href:n},r.a.createElement(h.p,{icon:"rss"})," Feed")),r.a.createElement(h.s,null,r.a.createElement(h.m,{href:a},r.a.createElement(h.p,{icon:"newspaper"})," Post Article")),r.a.createElement(h.s,null,r.a.createElement(h.m,{href:o},r.a.createElement(h.p,{icon:"image"})," Post Gif"))),r.a.createElement(h.v,{right:!0},r.a.createElement(h.s,null,r.a.createElement(h.l,null,r.a.createElement(h.o,{nav:!0,caret:!0},r.a.createElement(h.p,{icon:"user"})),r.a.createElement(h.n,{className:"dropdown-default"},r.a.createElement(h.m,{href:l},"logout")))))),r.a.createElement(c.a,null,r.a.createElement(h.t,{color:"aqua-gradient",dark:!0,expand:"md"},r.a.createElement(h.u,null,r.a.createElement("strong",{className:"white-text"},"TEAMWORK")),r.a.createElement(h.w,{onClick:this.toggleCollapse}),i))}}]),t}(a.Component),g=n(11),E=function(e){return r.a.createElement(h.c,{disabled:!0===(e.post.flag&&e.post.flag),onClick:function(){return function(e){var t=e.post.articleId||e.post.gifId;if(t){var n=g.APIendpoint+"/articles/"+t+"/flag";fetch(n,{method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," ").concat(localStorage.getItem("userId")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({postId:t,flag:!0})}).then((function(t){t.json().then((function(t){e.reRender()})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e),alert("Invalid flag")}))}}(e)}},r.a.createElement(h.p,{icon:"flag"})," Flag")},I=function(e){var t="/articles/"+e.post.articleId;return r.a.createElement(h.i,{md:"8"},r.a.createElement(h.d,{style:{margin:"10px"}},r.a.createElement(h.e,null,r.a.createElement("div",{className:"content"},e.post.authorName),r.a.createElement(h.h,null,e.post.title),r.a.createElement(h.g,null,e.post.post),r.a.createElement(h.c,{href:t},"View"),r.a.createElement(E,{post:e.post,reRender:function(){return e.reRender()}}))))},v=function(e){var t="/gifs/"+e.post.gifId;return r.a.createElement(h.i,{md:"8"},r.a.createElement(h.d,{style:{margin:"10px"}},r.a.createElement(h.e,null,r.a.createElement("div",{className:"content"},e.post.authorName),r.a.createElement(h.h,null,e.post.title),r.a.createElement(h.f,{className:"img-fluid",src:e.post.imageUrl,waves:!0}),r.a.createElement(h.c,{href:t},"View"),r.a.createElement(E,{post:e.post,reRender:function(){return e.reRender()}}))))},b=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getFeed=function(){return new Promise((function(t,n){fetch(g.APIendpoint+"/feed",{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(n){n.json().then((function(n){var a=n.data.map((function(t){return t.articleId?r.a.createElement(I,{key:t.articleId,post:t,reRender:function(){return e.reRender()},isRender:e.state.isReRender}):r.a.createElement(v,{key:t.gifId,post:t})}));t(a)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={isReRender:!1,feed:[]},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"reRender",value:function(){var e=this,t=!this.state.isReRender;this.setState({isReRender:t}),this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;0===this.state.feed.length&&this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return localStorage.getItem("token")?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.k,null,r.a.createElement(h.z,null,this.state.feed))):r.a.createElement(d.a,{to:"/signin"})}}]),t}(a.Component),k=n(20),j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.sendForm=function(){fetch(g.APIendpoint+"/auth/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e.state.email,password:e.state.password})}).then((function(t){t.json().then((function(t){localStorage.removeItem("token"),localStorage.removeItem("userId"),t.data.token&&(localStorage.setItem("token",t.data.token),localStorage.setItem("userId",t.data.userId)),e.setState({loggedIn:!0})})).catch((function(e){console.log(e),alert("Invalid username or password")}))})).catch((function(e){console.log(e),alert("Invalid username or password")}))},e.state={email:"",password:"",loggedIn:!1},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.loggedIn?r.a.createElement(d.a,{to:"/"}):r.a.createElement(h.k,null,r.a.createElement(h.z,null,r.a.createElement(h.i,{md:"12"},r.a.createElement(h.d,{style:{margin:"10%"}},r.a.createElement(h.e,null,r.a.createElement("form",{onSubmit:this.sendForm},r.a.createElement("p",{className:"h5 text-center mb-4"},"Sign in"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(h.r,{label:"Type your email",icon:"envelope",group:!0,type:"email",validate:!0,error:"wrong",success:"right",name:"email",autoComplete:"email",value:this.state.email,onInput:this.handleInput}),r.a.createElement(h.r,{label:"Type your password",icon:"lock",group:!0,type:"password",autoComplete:"password",validate:!0,name:"password",value:this.state.password,onInput:this.handleInput})),r.a.createElement("div",{className:"text-center"},r.a.createElement(h.c,{onClick:this.sendForm},"Login"))))))))}}]),t}(a.Component),O=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={token:localStorage.getItem("token")},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){localStorage.setItem("token",""),localStorage.removeItem("token"),localStorage.clear()}},{key:"componentWillUnmount",value:function(){localStorage.setItem("token",""),localStorage.removeItem("token"),localStorage.clear()}},{key:"render",value:function(){var e=this.props.reponame;e=window.location.pathname&&"Teamwork_frontend"===window.location.pathname.split("/")[1]?"/Teamwork_frontend/":"/",localStorage.setItem("token",""),localStorage.removeItem("token"),localStorage.clear();var t=e+"signin";return r.a.createElement("div",null,"You have been logged out.",r.a.createElement(d.a,{to:t}))}}]),t}(a.Component),y=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.sendForm=function(){e.state.title&&e.state.post?fetch(g.APIendpoint+"/articles",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:e.state.title,post:e.state.post,isGif:!1,authorId:4,flaged:!1,createdOn:new Date})}).then((function(t){t.json().then((function(t){e.setState({articleId:t.data.articleId})}))})).catch((function(e){console.log(e),alert("Invalid username or password")})):alert("Enter valid Title or Post ")},e.state={title:"",post:"",articleId:0},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(this.state.articleId>0){var e="/articles/"+this.state.articleId;return r.a.createElement(d.a,{to:e})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.k,null,r.a.createElement(h.z,null,r.a.createElement(h.i,{md:"12"},r.a.createElement(h.d,{style:{margin:"10%"}},r.a.createElement(h.e,null,r.a.createElement("form",{onSubmit:this.sendForm},r.a.createElement("p",{className:"h5 text-center mb-4"},"Post Article"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(h.r,{label:"Article Title",group:!0,type:"text",validate:!0,error:"wrong",success:"right",name:"title",autoComplete:"title",value:this.state.title,onInput:this.handleInput}),r.a.createElement(h.r,{label:"Article Post",group:!0,type:"textarea",validate:!0,error:"wrong",success:"right",name:"post",autoComplete:"post",value:this.state.post,onInput:this.handleInput})),r.a.createElement("div",{className:"text-center"},r.a.createElement(h.c,{onClick:this.sendForm},"Post Article")))))))))}}]),t}(a.Component),S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.sendForm=function(){if(e.state.title&&e.fileInputHandler.current.files[0]){var t=new FormData;t.append("file",e.fileInputHandler.current.files[0]),t.append("title",e.state.title),t.append("authorId","4"),t.append("isGif","true"),t.append("flaged","false"),t.append("createdOn",new Date),fetch(g.APIendpoint+"/gifs",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," 4")},body:t}).then((function(t){t.json().then((function(t){e.setState({gifId:t.data.gifId})}))})).catch((function(e){console.log(e),alert("Invalid username or password")}))}else alert("Enter valid Title or File ")},e.state={title:"",file:null,gifId:0},e.fileInputHandler=r.a.createRef(),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){if(this.state.gifId>0){var e="/gifs/"+this.state.gifId;return r.a.createElement(d.a,{to:e})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.k,null,r.a.createElement(h.z,null,r.a.createElement(h.i,{md:"12"},r.a.createElement(h.d,{style:{margin:"10%"}},r.a.createElement(h.e,null,r.a.createElement("form",{onSubmit:this.sendForm},r.a.createElement("p",{className:"h5 text-center mb-4"},"Post Gif"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(h.r,{label:"Gif Title",group:!0,type:"text",validate:!0,error:"wrong",success:"right",name:"title",autoComplete:"title",value:this.state.title,onInput:this.handleInput}),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",ref:this.fileInputHandler}))),r.a.createElement("div",{className:"text-center"},r.a.createElement(h.c,{onClick:this.sendForm},"Post Gif")))))))),r.a.createElement("hr",null))}}]),t}(a.Component),w=function(e){return r.a.createElement(h.g,{style:{margin:"10px",width:"100%"}},r.a.createElement("b",null,e.comment.authorName,":"),e.comment.comment,r.a.createElement("hr",null))},C=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleInput=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.sendForm=function(){if(e.state.comment){var t=e.props.id,n=g.APIendpoint+"/articles/"+t+"/comments";fetch(n,{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")," ").concat(localStorage.getItem("userId")),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({comment:e.state.comment,postId:t,authorId:localStorage.getItem("userId"),flaged:!1,createdOn:new Date})}).then((function(t){t.json().then((function(t){e.setState({comment:""}),e.props.reLoadComments()})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e),alert("Invalid comment")}))}else alert("Enter valid comment ")},e.state={comment:""},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.k,null,r.a.createElement(h.z,null,r.a.createElement(h.i,{md:"12"},r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.sendForm},r.a.createElement("p",{className:"h5 mb-8"},"Post Comment"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(h.r,{type:"textarea",rows:"2",name:"comment",autoComplete:"comment",label:"Enter Your Comment",icon:"pencil-alt",value:this.state.comment,onInput:this.handleInput})),r.a.createElement("div",{className:"text-right"},r.a.createElement(h.c,{onClick:function(){return e.sendForm()}},"Post")))))),r.a.createElement("br",null))}}]),t}(a.Component),F=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getComments=function(){return new Promise((function(t,n){var a=e.props.articleId||e.props.gifId;e.setState({postId:a});var o=g.APIendpoint+"/articles/"+a+"/comments";fetch(o,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){if(!e.data||0===e.data.length)return r.a.createElement(r.a.Fragment,null);var n=e.data.map((function(e){return r.a.createElement(w,{key:e.commentId,comment:e})}));t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={comments:[],checkedComments:!1,postId:null},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"reLoadComments",value:function(){var e=this;this.setState({comments:[]}),this.getComments().then((function(t){e.setState({comments:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return localStorage.getItem("token")?(0===this.state.comments.length&&this.getComments().then((function(t){e.setState({comments:t})})).catch((function(e){return console.log(e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.k,null,r.a.createElement(h.z,null,r.a.createElement(C,{reLoadComments:function(){return e.reLoadComments()},id:this.props.articleId||this.props.gifId||this.state.postId})),r.a.createElement(h.z,null,this.state.comments)))):r.a.createElement(d.a,{to:"/signin"})}}]),t}(a.Component),T=function(e){return r.a.createElement(h.i,{md:"8"},r.a.createElement(h.d,{style:{margin:"10px"}},r.a.createElement(h.e,null,r.a.createElement("div",{className:"content"},e.post.authorName),r.a.createElement(h.h,null,e.post.title),r.a.createElement(h.g,null,e.post.post),r.a.createElement(F,{articleId:e.post.articleId}))))},A=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getFeed=function(){return new Promise((function(t,n){var a=e.props.match.params.articleId;fetch(g.APIendpoint+"/articles/"+a,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){var n,a=e.data;n=a.articleId?r.a.createElement(T,{key:a.articleId,post:a}):r.a.createElement("h2",null,"Article post not found"),t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={isReRender:!1,feed:[]},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return 0===this.state.feed.length&&this.getFeed().then((function(t){e.setState({feed:t})})).catch((function(e){return console.log(e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.k,null,r.a.createElement(h.z,null,this.state.feed)))}}]),t}(a.Component),N=function(e){return r.a.createElement(h.i,{md:"8"},r.a.createElement(h.d,{style:{margin:"10px"}},r.a.createElement(h.e,null,r.a.createElement("div",{className:"content"},e.post.authorName),r.a.createElement(h.h,null,e.post.title),r.a.createElement(h.f,{className:"img-fluid",src:e.post.imageUrl,waves:!0}),r.a.createElement(F,{gifId:e.post.gifId}))))},P=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).getGifFeed=function(){return new Promise((function(t,n){var a=e.props.match.params.gifId;console.log("GIF_ID:",a),fetch(g.APIendpoint+"/gifs/"+a,{method:"GET",headers:{authorization:"Bearer ".concat(localStorage.getItem("token")," 4"),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){var n,a=e.data;n=a.gifId?r.a.createElement(N,{key:a.gifId,post:a}):r.a.createElement("h2",null,"Gif post not found"),t(n)}))})).catch((function(e){console.log(e),n(e)}))}))},e.state={giffeed:[]},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return 0===this.state.giffeed.length&&this.getGifFeed().then((function(t){e.setState({giffeed:t})})).catch((function(e){return console.log(e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.k,null,r.a.createElement(h.z,null,this.state.giffeed)))}}]),t}(a.Component),x=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).state={tag:"",token:localStorage.getItem("token")},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{reponame:this.props.reponame,prop_token:this.state.token}),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/signin",component:j}),r.a.createElement(d.b,{path:"/signout",render:function(t){return r.a.createElement(O,Object.assign({},t,{reponame:e.props.reponame}))}}),r.a.createElement(d.b,{path:"/post-article",component:y}),r.a.createElement(d.b,{path:"/post-gif",component:S}),r.a.createElement(d.b,{path:"/articles/:articleId",component:A}),r.a.createElement(d.b,{path:"/gifs/:gifId",component:P}),r.a.createElement(d.b,{exact:!0,path:"/",component:b}),r.a.createElement(d.b,{render:function(){return r.a.createElement("h1",null,"404 Page Not Found")}})))}}]),t}(r.a.Component);var R=function(){return r.a.createElement(c.a,{basename:"/Teamwork_frontend"},r.a.createElement(x,{reponame:"/Teamwork_frontend"}))};n(49),n(50),n(51);l.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.e43760aa.chunk.js.map